local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "Age of Weirdos",
    LoadingTitle = "Age of Weirdos",
    LoadingSubtitle = "DAMN.Jay",
    ConfigurationSaving = {
        Enabled = false,
        FolderName = nil,
        FileName = "Big Hub"
    },
    Discord = {
        Enabled = false,
        Invite = "noinvitelink",
        RememberJoins = true
    },
    KeySystem = false,
    KeySettings = {
        Title = "Untitled",
        Subtitle = "Key System",
        Note = "No method of obtaining the key is provided",
        FileName = "Key",
        SaveKey = true,
        GrabKeyFromSite = false,
        Key = {"Hello"}
    }
})

_G.CToggle = false;
_G.metalskin = false;
_G.LOCALPLAYER = game.Players.LocalPlayer.Name;
_G.bring = false;
local player = game.Players.LocalPlayer;
local plrlist = {};
local plrnum = 0;
local function breakvelocity()
    spawn(function()
        local BeenASecond, V3 = false, Vector3.new(0, 0, 0);
        delay(1, function()
            BeenASecond = true;
        end);
        while not BeenASecond do
            for _, v in ipairs(player.Character:GetDescendants()) do
                if v:IsA("BasePart") then
                    v.Velocity, v.RotVelocity = V3, V3;
                end
            end
            wait();
        end
    end);
end;

local function getNearPlayer(maxDistance)
    pcall(function()
        if player and player.Character then
            local playerLocation = player.Character.HumanoidRootPart.Position;
            for i, v in pairs(game.Players:GetChildren()) do
                if v.Character and v.Character:FindFirstChild("HumanoidRootPart") and v.Character.Humanoid.Health > 0 then
                    local location = v.Character.HumanoidRootPart.Position;
                    if (location - playerLocation).Magnitude <= maxDistance then
                        if not v.Character:FindFirstChild("telekinesisPosition") then
                            table.insert(plrlist, v.Character);
                        end
                    end
                end
            end
        end
    end);
end;

local function GetList()
    local Plyr = game.Players:GetPlayers();
    local dropdown = {};
    for _,v in pairs(Plyr) do
        table.insert(dropdown, v.Name);
    end
    return dropdown;
end;

local KeyBindsTab = Window:CreateTab("KeyBinds")
local KeyBindsSection = KeyBindsTab:CreateSection("KeyBind")

local Keybind = KeyBindsTab:CreateKeybind({
    Name = "Telekinesis kill",
    CurrentKeybind = "G", -- It's recommended to use a single key for the keybind
    HoldToInteract = false,
    Flag = "Keybind1", -- Ensure each keybind has a unique flag if using configuration saving
    Callback = function(Keybind)
        spawn(function()
            getNearPlayer(99);
            for i, v in pairs(plrlist) do
                v.Head.Neck:Destroy();
                game:GetService("ReplicatedStorage").Events.ToggleTelekinesis:InvokeServer(Vector3.new(1, 1, 1), false, game.Players[v.Parent.Name]);
            end
            plrlist = {};
        end)
    end
})

local TelekinesisLockKeybind = KeyBindsTab:CreateKeybind({
    Name = "Telekinesis Lock",
    CurrentKeybind = "T",
    HoldToInteract = false,
    Flag = "TelekinesisLockKeybind", -- Unique flag for configuration saving
    Callback = function(Keybind)
       spawn(function()
          local LookVector = game.Workspace.CurrentCamera.CFrame.LookVector
          game:GetService("ReplicatedStorage").Events.ToggleTelekinesis:InvokeServer(LookVector, true)
          game:GetService("ReplicatedStorage").Events.ToggleTelekinesis:InvokeServer(LookVector, false)
       end)
    end,
})
