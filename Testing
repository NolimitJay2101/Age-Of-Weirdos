local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "Age of Weirdos",
    LoadingTitle = "Age of Weirdos",
    LoadingSubtitle = "DAMN.Jay",
    ConfigurationSaving = {
        Enabled = false,
        FolderName = nil,
        FileName = "Big Hub"
    },
    Discord = {
        Enabled = false,
        Invite = "noinvitelink",
        RememberJoins = true
    },
    KeySystem = false,
    KeySettings = {
        Title = "Untitled",
        Subtitle = "Key System",
        Note = "No method of obtaining the key is provided",
        FileName = "Key",
        SaveKey = true,
        GrabKeyFromSite = false,
        Key = {"Hello"}
    }
})

local player = game.Players.LocalPlayer -- Get the local player

local plrlist = {} -- Initialize plrlist as an empty table

local function getNearPlayer(maxDistance)
    for _, v in ipairs(game.Players:GetPlayers()) do
        if v ~= player and v.Character and v.Character:FindFirstChild("HumanoidRootPart") and v.Character:FindFirstChild("Head") then
            local distance = (v.Character.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).magnitude
            if distance <= maxDistance and v.Character:FindFirstChild("Health") and v.Character.Health > 0 then
                table.insert(plrlist, v.Character)
            end
        end
    end
end

local KeyBindsTab = Window:CreateTab("KeyBinds")
local KeyBindsSection = KeyBindsTab:CreateSection("KeyBind")

local TelekinesisLockKeybind = KeyBindsTab:CreateKeybind({
    Name = "Telekinesis Lock",
    CurrentKeybind = "T",
    HoldToInteract = false,
    Flag = "TelekinesisLockKeybind", -- Unique flag for configuration saving
    Callback = function(Keybind)
       spawn(function()
          local LookVector = game.Workspace.CurrentCamera.CFrame.LookVector
          game:GetService("ReplicatedStorage").Events.ToggleTelekinesis:InvokeServer(LookVector, true)
          game:GetService("ReplicatedStorage").Events.ToggleTelekinesis:InvokeServer(LookVector, false)
       end)
    end,
})

local Keybind = KeyBindsTab:CreateKeybind({
    Name = "Telekinesis kill",
    CurrentKeybind = "G", -- It's recommended to use a single key for the keybind
    HoldToInteract = false,
    Flag = "Keybind1", -- Ensure each keybind has a unique flag if using configuration saving
    Callback = function(Keybind)
        spawn(function()
            plrlist = {} -- Clear the player list before checking again
            getNearPlayer(99)
            for _, v in ipairs(plrlist) do
                v.Head.Neck:Destroy()
                game:GetService("ReplicatedStorage").Events.ToggleTelekinesis:InvokeServer(Vector3.new(1, 1, 1), false, game.Players[v.Name].Character)
            end
        end)
    end
})
